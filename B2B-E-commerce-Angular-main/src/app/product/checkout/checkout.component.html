<div class="container mt-4">
  <h2>Checkout</h2>

  <form [formGroup]="checkoutForm" (ngSubmit)="onSubmit()">
    <div class="row">
      <div class="col-md-8">
        <div class="form-group mb-3">
          <label>Full Name</label>
          <input type="text" class="form-control" formControlName="fullName">
        </div>
        <div class="form-group mb-3">
          <label>Street Address</label>
          <input type="text" class="form-control" formControlName="streetAddress">
        </div>
        <div class="form-group mb-3">
          <label>City</label>
          <input type="text" class="form-control" formControlName="city">
        </div>
        <div class="form-group mb-3">
          <label>State/Province</label>
          <input type="text" class="form-control" formControlName="stateProvince">
        </div>
        <div class="form-group mb-3">
          <label>Postal Code</label>
          <input type="text" class="form-control" formControlName="postalCode">
        </div>
        <div class="form-group mb-3">
          <label>Country</label>
          <input type="text" class="form-control" formControlName="country">
        </div>
        <div class="form-group mb-3">
          <label>Phone Number</label>
          <input type="text" class="form-control" formControlName="phoneNumber">
        </div>

        <div class="form-group mb-3">
          <label>Payment Method</label>
          <select class="form-select" [(ngModel)]="selectedPayment" name="paymentMethod">
            <option *ngFor="let method of paymentMethods" [value]="method.id">
              {{ method.name }}
            </option>
          </select>
        </div>

        <div class="form-group mb-3">
          <label>Shipping Method</label>
          <select class="form-select" [(ngModel)]="selectedShipping" name="shippingMethod" (change)="onShippingChange()">
            <option *ngFor="let method of shippingMethods" [value]="method.id">
              {{ method.name }} - {{ method.price | currency}}
            </option>
          </select>
        </div>
      </div>

      <div class="col-md-4">
        <h4>Order Summary</h4>
        <ul class="list-group mb-3">
          <li *ngFor="let item of cartItems" class="list-group-item">
            {{ item.name }} x {{ item.quantity }} = <!---৳-->{{ item.price * item.quantity | currency }}
          </li>
        </ul>
        <p>Subtotal: <!---৳-->{{ subtotal | currency }}</p>
        <p>Shipping: <!---৳-->{{ shipping | currency}}</p>
        <p>Tax: <!---৳-->{{ tax | currency}}</p>
        <h5>Total: <!---৳-->{{ total | currency}}</h5>

        <button class="btn btn-success w-100" type="submit" [disabled]="loading">
          {{ loading ? 'Processing...' : 'Place Order' }}
        </button>
      </div>
    </div>

    <div *ngIf="error" class="alert alert-danger mt-3">{{ error }}</div>
  </form>
</div>
